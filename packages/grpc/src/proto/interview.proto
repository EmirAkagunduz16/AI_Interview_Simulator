syntax = "proto3";

package interview;

// Interview service gRPC definition
service InterviewService {
  // Get an interview by ID (internal, without user check)
  rpc GetInterview(GetInterviewRequest) returns (InterviewResponse);

  // Get interviews for a user
  rpc GetUserInterviews(GetUserInterviewsRequest) returns (InterviewListResponse);

  // Get interview stats for a user
  rpc GetInterviewStats(GetInterviewStatsRequest) returns (InterviewStatsResponse);
}

message GetInterviewRequest {
  string interview_id = 1;
}

message GetUserInterviewsRequest {
  string user_id = 1;
  int32 page = 2;
  int32 limit = 3;
  optional string status = 4;
}

message GetInterviewStatsRequest {
  string user_id = 1;
}

message InterviewResponse {
  string id = 1;
  string user_id = 2;
  string title = 3;
  string field = 4;
  repeated string tech_stack = 5;
  string type = 6;
  string status = 7;
  string difficulty = 8;
  int32 duration_minutes = 9;
  optional double total_score = 10;
  optional string overall_feedback = 11;
  repeated InterviewAnswerResponse answers = 12;
  optional InterviewReportResponse report = 13;
}

message InterviewAnswerResponse {
  string question_id = 1;
  string question_title = 2;
  string answer = 3;
  optional string feedback = 4;
  optional double score = 5;
  repeated string strengths = 6;
  repeated string improvements = 7;
}

message InterviewReportResponse {
  double technical_score = 1;
  double communication_score = 2;
  double diction_score = 3;
  double confidence_score = 4;
  double overall_score = 5;
  string summary = 6;
  repeated string recommendations = 7;
}

message InterviewListResponse {
  repeated InterviewResponse interviews = 1;
  int32 total = 2;
  int32 page = 3;
  int32 total_pages = 4;
}

message InterviewStatsResponse {
  int32 total_interviews = 1;
  int32 completed_interviews = 2;
  double average_score = 3;
  double best_score = 4;
  int32 total_questions_answered = 5;
}
